!function(e){const{__}=wp.i18n,t=e("#upload-submit"),o=new EventSource(openlabModulesImport.url);o.onmessage=function(t){const n=JSON.parse(t.data);"complete"===n.action&&(o.close(),function(t){const o=e("#import-status-message").find("strong");t.error?o.html(__("Import unsuccessful.","openlab-modules")):o.text(__("Step 3: Import Complete. Check out your site!","openlab-modules"))}(n))},o.addEventListener("log",(function(t){const o=JSON.parse(t.data),n=document.createElement("tr"),p=document.createElement("td");p.appendChild(document.createTextNode(o.level)),n.appendChild(p);const l=document.createElement("td");l.appendChild(document.createTextNode(o.message)),n.appendChild(l),e("#import-log").append(n)})),e("#importzip").on("change",(function(o){const n=o.target.files[0];let p="";if("application/zip"===n.type||"application/x-zip-compressed"===n.type||(p=__("Please select an OpenLab Modules Export file (.zip).","openlab-modules")),!p){const e=parseInt(openlabModulesImport.maxUploadSize);n.size>e&&(p=openlabModulesImport.strings.errorSize)}p?(e("#ol-import-error").html(p),t.prop("disabled",!0)):(e("#ol-import-error").html(""),t.prop("disabled",!1))})),t.on("click",(()=>{t.val(__("Uploadingâ€¦","openlab-modules")).attr("disabled",!0),t.closest("form").submit()}))}(jQuery);