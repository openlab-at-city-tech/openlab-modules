(()=>{"use strict";(()=>{const e={};let t=!1,n=!1;if("undefined"==typeof wwpe)return;window.addEventListener("message",(o=>{if(o.origin!==window.location.origin)return;const{data:r}=o;if(void 0===r)return;const a=(e=>{try{return JSON.parse(e)}catch(e){return null}})(r);if(!a)return;const{frame:l,type:s}=a;void 0!==s&&"webwork.interaction.attempt"===s&&1===parseFloat(a.status)&&((n=>{document.getElementById(n)&&(t||([...document.querySelectorAll(".renderer-problem")].forEach((t=>{e[t.id]=!1})),t=!0),0!==e.length&&e.hasOwnProperty(n)&&(e[n]=!0))})(l),0!==e.length&&Object.values(e).every((e=>e))&&(()=>{if(n)return;const{nonce:e,postId:t}=openlabModulesWwpe;(async function(e,t){const{ajaxUrl:n}=openlabModulesWwpe,o=`${n}?action=mark_module_section_complete`,r=new URLSearchParams;return r.append("nonce",e),r.append("postId",t),(await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()})).json()})(e,t).then((()=>{n=!0,console.log("Successfully marked section as complete.")}))})())})),window.addEventListener("load",(()=>{const{isUserLoggedIn:e}=openlabModulesWwpe;if(e)return;let t="<p>"+openlabModulesWwpeStrings.youAreNotLoggedIn+"</p>";t+="<p>"+openlabModulesWwpeStrings.toReceiveCredit+"</p>",t+='<p><button class="overlay-button" data-redirect-url="'+openlabModulesWwpe.loginUrl+'">'+openlabModulesWwpeStrings.logIn+"</button></p>",t+='<p><a class="overlay-button-dismiss" href="#">'+openlabModulesWwpeStrings.continueWithout+"</a></p>",[...document.querySelectorAll(".renderer-problem")].forEach((e=>{const n=document.createElement("div");n.classList.add("renderer-problem-overlay"),n.innerHTML=t,e.closest(".wwpe-problem-wrapper").appendChild(n)}))})),window.addEventListener("click",(e=>{const{target:t}=e;if(!t.classList.contains("overlay-button"))return;e.preventDefault();const{redirectUrl:n}=t.dataset;n&&(window.location.href=n)})),window.addEventListener("click",(e=>{const{target:t}=e;t.classList.contains("overlay-button-dismiss")&&(e.preventDefault(),[...document.querySelectorAll(".renderer-problem-overlay")].forEach((e=>{e.remove()})))}))})()})();