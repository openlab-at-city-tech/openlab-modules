(()=>{var e={184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var l=o.apply(null,n);l&&e.push(l)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var i in n)r.call(n,i)&&n[i]&&e.push(i)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.apiFetch;var t=n.n(e);const r=window.wp.data,o={modulePageIdsByModuleId:{},modulePagesByModuleId:{},pageModulesByPageId:{}},a={fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e}),setPageModules:(e,t)=>({type:"SET_PAGE_MODULES",pageId:e,pageModules:t}),setModulePageIds:(e,t)=>({type:"SET_MODULE_PAGE_IDS",moduleId:e,modulePageIds:t}),setModulePages:(e,t)=>({type:"SET_MODULE_PAGES",moduleId:e,modulePages:t})},l={*getModulePageIds(e){const t="/wp/v2/openlab_module/"+e,n=yield a.fetchFromAPI(t),r=n?.meta?.module_page_ids||"",o=r?JSON.parse(r):[];return a.setModulePageIds(e,o)},*getModulePages(e){const t="/openlab-modules/v1/module-pages/"+e,n=yield a.fetchFromAPI(t);return a.setModulePages(e,n)},*getPageModules(e){const t="/openlab-modules/v1/page-modules/"+e,n=yield a.fetchFromAPI(t);return a.setPageModules(e,n)}},i={actions:a,reducer:(e=o,t)=>{switch(t.type){case"SET_MODULE_PAGE_IDS":return{...e,modulePageIdsByModuleId:{...e.modulePageIdsByModuleId,[t.moduleId]:t.modulePageIds}};case"SET_MODULE_PAGES":return{...e,modulePagesByModuleId:{...e.modulePagesByModuleId,[t.moduleId]:t.modulePages}};case"SET_PAGE_MODULES":return{...e,pageModulesByPageId:{...e.pageModulesByPageId,[t.pageId]:t.pageModules}};default:return e}},controls:{FETCH_FROM_API:e=>t()({path:e.path})},selectors:{getModulePageIds(e,t){const{modulePageIdsByModuleId:n}=e;return 0===t?[]:n[t]},getModulePages(e,t){const{modulePagesByModuleId:n}=e;return 0===t?[]:n[t]},getPageModules(e,t){const{pageModulesByPageId:n}=e;return n[t]}},resolvers:l};(0,r.registerStore)("openlab-modules",i);const s=window.wp.blocks,c=window.wp.i18n,d=window.wp.blockEditor,u=window.wp.components,g=JSON.parse('{"u2":"openlab-modules/module-list"}');(0,s.registerBlockType)(g.u2,{title:"Module List",icon:"editor-ul",edit:function({attributes:e}){const{allModules:t}=(0,r.useSelect)((e=>{const t=e("core").getEntityRecords("postType","openlab_module",{order:"asc",orderby:"title",per_page:100,status:"any"});return{allModules:t?t.filter((e=>e.title.rendered.length>0)):null}}));return React.createElement("div",(0,d.useBlockProps)({className:[]}),null!==t&&t.length>0&&React.createElement("ul",{className:"openlab-modules-module-list"},t.map((e=>React.createElement("li",{key:"module-"+e.id},React.createElement("h2",null,React.createElement("a",{href:e.link},e.title.rendered)),React.createElement("p",{className:"module-description"},e.meta.module_description))))),null!==t&&0===t.length&&React.createElement("p",null,(0,c.__)("This site has no modules to display.","openlab-modules")),null===t&&React.createElement(u.Spinner,null))}});const p=window.wp.element,m=JSON.parse('{"u2":"openlab-modules/module-navigation"}');(0,s.registerBlockType)(m.u2,{title:"Module Navigation",icon:"menu",edit:function({attributes:e,isSelected:t,setAttributes:n}){const{moduleId:o}=e,{allModules:a,currentPostId:l,currentPostTitle:i,isNewModule:s,thisModulePageIds:g,thisModulePages:m}=(0,r.useSelect)((e=>{const t=e("core").getEntityRecords("postType","openlab_module",{order:"asc",orderby:"title",per_page:100,status:"any"}),n=e("openlab-modules").getModulePages(o),r=e("openlab-modules").getModulePageIds(o)||[],a=e("core/editor").getCurrentPostId(),l=(e("core/editor").getEditedPostAttribute("id"),e("core/editor").getEditedPostAttribute("status")),i=e("core/editor").getCurrentPostType(),s=l&&"auto-draft"===l&&i&&"openlab_module"===i;return{allModules:t,currentPostId:a,currentPostTitle:e("core/editor").getEditedPostAttribute("title"),isNewModule:s,thisModulePageIds:r,thisModulePages:n}}),[o]);(0,p.useEffect)((()=>{!o&&s&&l&&n({moduleId:l})}),[l]);const f=(e,t)=>{switch(t){case"publish":return e;case"trash":return(0,c.sprintf)((0,c.__)("%s (Trash)","openlab-modules"),e);case"draft":return(0,c.sprintf)((0,c.__)("%s (Draft)","openlab-modules"),e)}},h=a?a.map((e=>({label:f(e.title.rendered,e.status),value:e.id.toString()}))):[];s&&h.unshift({label:i,value:l}),h.unshift({label:(0,c.__)("- Select Module -","openlab-modules"),value:""});const v=[];v.push({id:o,url:"",title:(0,c.__)("Module Home","openlab-modules"),statusCode:"publish",statusEl:React.createElement(React.Fragment,null)});for(const e of g)if(m&&m.hasOwnProperty(e)){const t=e=>{switch(e){case"publish":return React.createElement(React.Fragment,null);case"trash":return React.createElement("span",{className:"module-page-status module-page-status-trash"},(0,c.__)("This page is in the trash and will not appear on the frontend.","openlab-modules"));case"draft":return React.createElement("span",{className:"module-page-status module-page-status-draft"},(0,c.__)("This page is in draft status and will not appear on the frontend.","openlab-modules"));default:const t="module-page-status module-page-status-"+e;return React.createElement("span",{className:t},(0,c.__)("Draft","openlab-modules"))}},n=m[e];v.push({id:n.id,url:n.url,title:n.title,statusCode:n.status,statusEl:t(n.status)})}return(0,r.useDispatch)(),React.createElement(React.Fragment,null,React.createElement(d.InspectorControls,null,React.createElement(u.Panel,null,React.createElement(u.PanelBody,{title:(0,c.__)("Navigation Settings","openlab-modules")},React.createElement(u.SelectControl,{help:(0,c.__)("Select the Module whose navigation should be displayed.","openlab-modules"),label:(0,c.__)("Module","openlab-modules"),onChange:e=>n({moduleId:parseInt(e,10)}),options:h,value:o.toString()})))),React.createElement("div",(0,d.useBlockProps)({className:[]}),React.createElement("div",{className:"openlab-modules-module-navigation"},React.createElement("p",{className:"openlab-modules-module-navigation-heading"},(0,c.sprintf)((0,c.__)("Contents for Module: %s"),(()=>{if(s||l&&o===l)return i;{const e=a?a.find((e=>e.id===o)):null;return e?e.title.rendered:""}})())),React.createElement("ul",{className:"openlab-modules-module-navigation-list",role:"list"},v.map((e=>{const t="publish"!==e.statusCode?"module-page-has-non-publish-status module-page-has-status-"+e.StatusCode:"module-page-has-publish-status";return React.createElement("li",{key:"module-page-"+e.id,className:t},React.createElement("a",{href:e.url},e.title),e.statusEl)})))),t&&React.createElement(React.Fragment,null,React.createElement("p",{className:"openlab-modules-gloss"},(0,c.__)("This navigation is dynamically generated based on the pages belonging to the Module.","openlab-modules")),React.createElement("p",{className:"openlab-modules-gloss"},React.createElement("button",{className:"add-a-page-link",onClick:()=>{wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/document"),setTimeout((()=>{const e=document.querySelector(".openlab-modules-add-page-to-module");e&&(wp.data.dispatch("core/block-editor").clearSelectedBlock(),e.classList.add("highlight"),setTimeout((()=>{e.classList.remove("highlight")}),5e3))}),100)}},(0,c.__)("Add Page to Module (in the module settings panel)","openlab-modules"))))))}});const f=window.wp.plugins,h=window.wp.editPost,v=window.wp.url,b=window.wp.htmlEntities,y="gutenberg-post-picker",w=e=>{const{fetchParams:n={},onSelectPost:r,label:o="",postTypes:a=["posts","pages"],placeholder:l=""}=e,[i,s]=(0,p.useState)(""),[d,g]=(0,p.useState)([]),[m,f]=(0,p.useState)(!1),[h,v]=(0,p.useState)(null);return React.createElement("div",{className:`${y}`},React.createElement(u.NavigableMenu,{onNavigate:function(e){0===e&&v(null),v(e)},orientation:"vertical"},React.createElement(u.TextControl,{label:o,value:i,onChange:e=>{s(e),f(!0);const r=new URLSearchParams;r.append("search",e),Object.entries(n).forEach((([e,t])=>{r.append(e,t)}));const o=r.toString();Promise.all(a.map((e=>{const n=`/wp/v2/${e}?${o}`;return console.log(n),t()({path:n})}))).then((e=>{g(e.reduce(((e,t)=>[...t,...e]),[])),f(!1)}))},placeholder:l}),i.length?React.createElement("ul",{className:`${y}-grid`,style:{marginTop:"0",marginBottom:"0",marginLeft:"0",paddingLeft:"0",listStyle:"none"}},m&&React.createElement(u.Spinner,null),!m&&!d.length&&React.createElement("li",{className:`${y}-grid-item`},React.createElement(u.Button,{disabled:!0},(0,c.__)("No Items found",y))),d.map(((e,t)=>e.title.rendered.length?React.createElement("li",{key:e.id,className:`${y}-grid-item`,style:{marginBottom:"0"}},React.createElement(E,{onClick:()=>function(e){r(e),g([]),s("")}(e),searchTerm:i,suggestion:e,isSelected:h===t+1})):null))):null))};function E(e){const{suggestion:t,onClick:n,searchTerm:r="",isSelected:o=!1,id:a=""}=e;return React.createElement(u.Button,{id:a,onClick:n,className:`block-editor-link-control__search-item is-entity ${o&&"is-selected"}`,style:{borderRadius:"0"}},React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title"},React.createElement(u.TextHighlight,{text:(0,b.decodeEntities)(t.title.rendered),highlight:r})),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info"},(0,v.filterURLForDisplay)((0,v.safeDecodeURI)(t.link))||"")),t.type&&React.createElement("span",{className:"block-editor-link-control__search-item-type"},"post_tag"===t.type?"tag":t.type))}const R=window.React;var x=n.n(R);const C=window.ReactDOM,S="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function D(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function M(e){return"nodeType"in e}function P(e){var t,n;return e?D(e)?e:M(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function N(e){const{Document:t}=P(e);return e instanceof t}function _(e){return!D(e)&&e instanceof P(e).HTMLElement}function I(e){return e?D(e)?e.document:M(e)?N(e)?e:_(e)?e.ownerDocument:document:document:document}const k=S?R.useLayoutEffect:R.useEffect;function T(e){const t=(0,R.useRef)(e);return k((()=>{t.current=e})),(0,R.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function O(e,t){void 0===t&&(t=[e]);const n=(0,R.useRef)(e);return k((()=>{n.current!==e&&(n.current=e)}),t),n}function A(e,t){const n=(0,R.useRef)();return(0,R.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function L(e){const t=T(e),n=(0,R.useRef)(null),r=(0,R.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function B(e){const t=(0,R.useRef)();return(0,R.useEffect)((()=>{t.current=e}),[e]),t.current}let F={};function j(e,t){return(0,R.useMemo)((()=>{if(t)return t;const n=null==F[e]?0:F[e]+1;return F[e]=n,e+"-"+n}),[e,t])}function U(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t}),{...t})}}const z=U(1),X=U(-1);function Y(e){if(!e)return!1;const{KeyboardEvent:t}=P(e.target);return t&&e instanceof t}function K(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=P(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const H=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[H.Translate.toString(e),H.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),J="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function W(e){return e.matches(J)?e:e.querySelector(J)}const V={display:"none"};function $(e){let{id:t,value:n}=e;return x().createElement("div",{id:t,style:V},n)}const G={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function q(e){let{id:t,announcement:n}=e;return x().createElement("div",{id:t,style:G,role:"status","aria-live":"assertive","aria-atomic":!0},n)}const Z=(0,R.createContext)(null),Q={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ee={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function te(e){let{announcements:t=ee,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Q}=e;const{announce:a,announcement:l}=function(){const[e,t]=(0,R.useState)("");return{announce:(0,R.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),i=j("DndLiveRegion"),[s,c]=(0,R.useState)(!1);if((0,R.useEffect)((()=>{c(!0)}),[]),function(e){const t=(0,R.useContext)(Z);(0,R.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,R.useMemo)((()=>({onDragStart(e){let{active:n}=e;a(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&a(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;a(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;a(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;a(t.onDragCancel({active:n,over:r}))}})),[a,t])),!s)return null;const d=x().createElement(x().Fragment,null,x().createElement($,{id:r,value:o.draggable}),x().createElement(q,{id:i,announcement:l}));return n?(0,C.createPortal)(d,n):d}var ne;function re(){}function oe(e,t){return(0,R.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(ne||(ne={}));const ae=Object.freeze({x:0,y:0});function le(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ie(e,t){const n=K(e);return n?(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%":"0 0"}function se(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ce(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function de(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function ue(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function ge(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const pe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=ge(t,t.left,t.top),a=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=le(ge(r),o);a.push({id:t,data:{droppableContainer:e,value:n}})}}return a.sort(se)};function me(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=o-r,i=a-n;if(r<o&&n<a){const n=t.width*t.height,r=e.width*e.height,o=l*i;return Number((o/(n+r-o)).toFixed(4))}return 0}const fe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,a=n.get(r);if(a){const n=me(a,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(ce)};function he(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ae}function ve(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const be=ve(1);function ye(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const we={ignoreTransform:!1};function Ee(e,t){void 0===t&&(t=we);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=P(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=ye(t);if(!r)return e;const{scaleX:o,scaleY:a,x:l,y:i}=r,s=e.left-l-(1-o)*parseFloat(n),c=e.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,u=a?e.height/a:e.height;return{width:d,height:u,top:c,right:s+d,bottom:c+u,left:s}}(n,t,r))}const{top:r,left:o,width:a,height:l,bottom:i,right:s}=n;return{top:r,left:o,width:a,height:l,bottom:i,right:s}}function Re(e){return Ee(e,{ignoreTransform:!0})}function xe(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(N(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!_(o)||function(e){return e instanceof P(e).SVGElement}(o))return n;if(n.includes(o))return n;const a=P(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=P(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(o,a)&&n.push(o),function(e,t){return void 0===t&&(t=P(e).getComputedStyle(e)),"fixed"===t.position}(o,a)?n:r(o.parentNode)}(e):n}function Ce(e){const[t]=xe(e,1);return null!=t?t:null}function Se(e){return S&&e?D(e)?e:M(e)?N(e)||e===I(e).scrollingElement?window:_(e)?e:null:null:null}function De(e){return D(e)?e.scrollX:e.scrollLeft}function Me(e){return D(e)?e.scrollY:e.scrollTop}function Pe(e){return{x:De(e),y:Me(e)}}var Ne;function _e(e){return!(!S||!e)&&e===document.scrollingElement}function Ie(e){const t={x:0,y:0},n=_e(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Ne||(Ne={}));const ke={x:.2,y:.2};function Te(e,t,n,r,o){let{top:a,left:l,right:i,bottom:s}=n;void 0===r&&(r=10),void 0===o&&(o=ke);const{isTop:c,isBottom:d,isLeft:u,isRight:g}=Ie(e),p={x:0,y:0},m={x:0,y:0},f=t.height*o.y,h=t.width*o.x;return!c&&a<=t.top+f?(p.y=Ne.Backward,m.y=r*Math.abs((t.top+f-a)/f)):!d&&s>=t.bottom-f&&(p.y=Ne.Forward,m.y=r*Math.abs((t.bottom-f-s)/f)),!g&&i>=t.right-h?(p.x=Ne.Forward,m.x=r*Math.abs((t.right-h-i)/h)):!u&&l<=t.left+h&&(p.x=Ne.Backward,m.x=r*Math.abs((t.left+h-l)/h)),{direction:p,speed:m}}function Oe(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Ae(e){return e.reduce(((e,t)=>z(e,Pe(t))),ae)}function Le(e,t){if(void 0===t&&(t=Ee),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);Ce(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Be=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+De(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Me(t)),0)}]];class Fe{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=xe(t),r=Ae(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of Be)for(const a of t)Object.defineProperty(this,a,{get:()=>{const t=o(n),l=r[e]-t;return this.rect[a]+l},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class je{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Ue(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var ze,Xe;function Ye(e){e.preventDefault()}function Ke(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(ze||(ze={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(Xe||(Xe={}));const He={start:[Xe.Space,Xe.Enter],cancel:[Xe.Esc],end:[Xe.Space,Xe.Enter]},Je=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Xe.Right:return{...n,x:n.x+25};case Xe.Left:return{...n,x:n.x-25};case Xe.Down:return{...n,y:n.y+25};case Xe.Up:return{...n,y:n.y-25}}};class We{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new je(I(t)),this.windowListeners=new je(P(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ze.Resize,this.handleCancel),this.windowListeners.add(ze.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(ze.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Le(n),t(ae)}handleKeyDown(e){if(Y(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=He,coordinateGetter:a=Je,scrollBehavior:l="smooth"}=r,{code:i}=e;if(o.end.includes(i))return void this.handleEnd(e);if(o.cancel.includes(i))return void this.handleCancel(e);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:ae;this.referenceCoordinates||(this.referenceCoordinates=c);const d=a(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=X(d,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:a,isRight:i,isLeft:s,isBottom:c,maxScroll:u,minScroll:g}=Ie(n),p=Oe(n),m={x:Math.min(o===Xe.Right?p.right-p.width/2:p.right,Math.max(o===Xe.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(o===Xe.Down?p.bottom-p.height/2:p.bottom,Math.max(o===Xe.Down?p.top:p.top+p.height/2,d.y))},f=o===Xe.Right&&!i||o===Xe.Left&&!s,h=o===Xe.Down&&!c||o===Xe.Up&&!a;if(f&&m.x!==d.x){const e=n.scrollLeft+t.x,a=o===Xe.Right&&e<=u.x||o===Xe.Left&&e>=g.x;if(a&&!t.y)return void n.scrollTo({left:e,behavior:l});r.x=a?n.scrollLeft-e:o===Xe.Right?n.scrollLeft-u.x:n.scrollLeft-g.x,r.x&&n.scrollBy({left:-r.x,behavior:l});break}if(h&&m.y!==d.y){const e=n.scrollTop+t.y,a=o===Xe.Down&&e<=u.y||o===Xe.Up&&e>=g.y;if(a&&!t.x)return void n.scrollTo({top:e,behavior:l});r.y=a?n.scrollTop-e:o===Xe.Down?n.scrollTop-u.y:n.scrollTop-g.y,r.y&&n.scrollBy({top:-r.y,behavior:l});break}}this.handleMove(e,z(X(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Ve(e){return Boolean(e&&"distance"in e)}function $e(e){return Boolean(e&&"delay"in e)}We.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=He,onActivation:o}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const t=a.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==o||o({event:e.nativeEvent}),0))}return!1}}];class Ge{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=P(e);return e instanceof t?e:I(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:a}=o;this.props=e,this.events=t,this.document=I(a),this.documentListeners=new je(this.document),this.listeners=new je(n),this.windowListeners=new je(P(a)),this.initialCoordinates=null!=(r=K(o))?r:ae,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(ze.Resize,this.handleCancel),this.windowListeners.add(ze.DragStart,Ye),this.windowListeners.add(ze.VisibilityChange,this.handleCancel),this.windowListeners.add(ze.ContextMenu,Ye),this.documentListeners.add(ze.Keydown,this.handleKeydown),t){if(Ve(t))return;if($e(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay))}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(ze.Click,Ke,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ze.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:a,options:{activationConstraint:l}}=o;if(!r)return;const i=null!=(t=K(e))?t:ae,s=X(r,i);if(!n&&l){if($e(l))return Ue(s,l.tolerance)?this.handleCancel():void 0;if(Ve(l))return null!=l.tolerance&&Ue(s,l.tolerance)?this.handleCancel():Ue(s,l.distance)?this.handleStart():void 0}e.cancelable&&e.preventDefault(),a(i)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Xe.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const qe={move:{name:"pointermove"},end:{name:"pointerup"}};class Ze extends Ge{constructor(e){const{event:t}=e,n=I(t.target);super(e,qe,n)}}Ze.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const Qe={move:{name:"mousemove"},end:{name:"mouseup"}};var et;!function(e){e[e.RightClick=2]="RightClick"}(et||(et={})),class extends Ge{constructor(e){super(e,Qe,I(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==et.RightClick&&(null==r||r({event:n}),!0)}}];const tt={move:{name:"touchmove"},end:{name:"touchend"}};var nt,rt;(class extends Ge{constructor(e){super(e,tt)}static setup(){return window.addEventListener(tt.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(tt.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1||(null==r||r({event:n}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(nt||(nt={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(rt||(rt={}));const ot={x:{[Ne.Backward]:!1,[Ne.Forward]:!1},y:{[Ne.Backward]:!1,[Ne.Forward]:!1}};var at,lt;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(at||(at={})),function(e){e.Optimized="optimized"}(lt||(lt={}));const it=new Map;function st(e,t){return A((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function ct(e){let{callback:t,disabled:n}=e;const r=T(t),o=(0,R.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return(0,R.useEffect)((()=>()=>null==o?void 0:o.disconnect()),[o]),o}function dt(e){return new Fe(Ee(e),e)}function ut(e,t,n){void 0===t&&(t=dt);const[r,o]=(0,R.useReducer)((function(r){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a}),null),a=function(e){let{callback:t,disabled:n}=e;const r=T(t),o=(0,R.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return(0,R.useEffect)((()=>()=>null==o?void 0:o.disconnect()),[o]),o}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){o();break}}}}),l=ct({callback:o});return k((()=>{o(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())}),[e]),r}const gt=[];function pt(e,t){void 0===t&&(t=[]);const n=(0,R.useRef)(null);return(0,R.useEffect)((()=>{n.current=null}),t),(0,R.useEffect)((()=>{const t=e!==ae;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?X(e,n.current):ae}function mt(e){return(0,R.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const ft=[];function ht(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return _(t)?t:e}const vt=[{sensor:Ze,options:{}},{sensor:We,options:{}}],bt={current:{}},yt={draggable:{measure:Re},droppable:{measure:Re,strategy:at.WhileDragging,frequency:lt.Optimized},dragOverlay:{measure:Ee}};class wt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Et={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:re},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yt,measureDroppableContainers:re,windowRect:null,measuringScheduled:!1},Rt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:re,draggableNodes:new Map,over:null,measureDroppableContainers:re},xt=(0,R.createContext)(Rt),Ct=(0,R.createContext)(Et);function St(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wt}}}function Dt(e,t){switch(t.type){case ne.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ne.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case ne.DragEnd:case ne.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ne.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new wt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case ne.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new wt(e.droppable.containers);return l.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case ne.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new wt(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Mt(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=(0,R.useContext)(xt),a=B(r),l=B(null==n?void 0:n.id);return(0,R.useEffect)((()=>{if(!t&&!r&&a&&null!=l){if(!Y(a))return;if(document.activeElement===a.target)return;const e=o.get(l);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=W(e);if(t){t.focus();break}}}))}}),[r,t,o,l,a]),null}function Pt(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const Nt=(0,R.createContext)({...ae,scaleX:1,scaleY:1});var _t;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(_t||(_t={}));const It=(0,R.memo)((function(e){var t,n,r,o;let{id:a,accessibility:l,autoScroll:i=!0,children:s,sensors:c=vt,collisionDetection:d=fe,measuring:u,modifiers:g,...p}=e;const m=(0,R.useReducer)(Dt,void 0,St),[f,h]=m,[v,b]=function(){const[e]=(0,R.useState)((()=>new Set)),t=(0,R.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,R.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[y,w]=(0,R.useState)(_t.Uninitialized),E=y===_t.Initialized,{draggable:{active:D,nodes:M,translate:N},droppable:{containers:I}}=f,T=D?M.get(D):null,F=(0,R.useRef)({initial:null,translated:null}),U=(0,R.useMemo)((()=>{var e;return null!=D?{id:D,data:null!=(e=null==T?void 0:T.data)?e:bt,rect:F}:null}),[D,T]),X=(0,R.useRef)(null),[Y,H]=(0,R.useState)(null),[J,W]=(0,R.useState)(null),V=O(p,Object.values(p)),$=j("DndDescribedBy",a),G=(0,R.useMemo)((()=>I.getEnabled()),[I]),q=(Q=u,(0,R.useMemo)((()=>({draggable:{...yt.draggable,...null==Q?void 0:Q.draggable},droppable:{...yt.droppable,...null==Q?void 0:Q.droppable},dragOverlay:{...yt.dragOverlay,...null==Q?void 0:Q.dragOverlay}})),[null==Q?void 0:Q.draggable,null==Q?void 0:Q.droppable,null==Q?void 0:Q.dragOverlay]));var Q;const{droppableRects:ee,measureDroppableContainers:re,measuringScheduled:oe}=function(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,l]=(0,R.useState)(null),{frequency:i,measure:s,strategy:c}=o,d=(0,R.useRef)(e),u=function(){switch(c){case at.Always:return!1;case at.BeforeDragging:return n;default:return!n}}(),g=O(u),p=(0,R.useCallback)((function(e){void 0===e&&(e=[]),g.current||l((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[g]),m=(0,R.useRef)(null),f=A((t=>{if(u&&!n)return it;if(!t||t===it||d.current!==e||null!=a){const t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Fe(s(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,a,n,u,s]);return(0,R.useEffect)((()=>{d.current=e}),[e]),(0,R.useEffect)((()=>{u||p()}),[n,u]),(0,R.useEffect)((()=>{a&&a.length>0&&l(null)}),[JSON.stringify(a)]),(0,R.useEffect)((()=>{u||"number"!=typeof i||null!==m.current||(m.current=setTimeout((()=>{p(),m.current=null}),i))}),[i,u,p,...r]),{droppableRects:f,measureDroppableContainers:p,measuringScheduled:null!=a}}(G,{dragging:E,dependencies:[N.x,N.y],config:q.droppable}),le=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return A((e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(M,D),ie=(0,R.useMemo)((()=>J?K(J):null),[J]),se=function(){const e=!1===(null==Y?void 0:Y.autoScrollEnabled),t="object"==typeof i?!1===i.enabled:!1===i,n=E&&!e&&!t;return"object"==typeof i?{...i,enabled:n}:{enabled:n}}(),ce=function(e,t){return st(e,t)}(le,q.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=(0,R.useRef)(!1),{x:l,y:i}="boolean"==typeof o?{x:o,y:o}:o;k((()=>{if(!l&&!i||!t)return void(a.current=!1);if(a.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const o=he(n(e),r);if(l||(o.x=0),i||(o.y=0),a.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){const t=Ce(e);t&&t.scrollBy({top:o.y,left:o.x})}}),[t,l,i,r,n])}({activeNode:D?M.get(D):null,config:se.layoutShiftCompensation,initialRect:ce,measure:q.draggable.measure});const de=ut(le,q.draggable.measure,ce),ge=ut(le?le.parentElement:null),pe=(0,R.useRef)({activatorEvent:null,active:null,activeNode:le,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=I.getNodeFor(null==(t=pe.current.over)?void 0:t.id),ve=function(e){let{measure:t}=e;const[n,r]=(0,R.useState)(null),o=ct({callback:(0,R.useCallback)((e=>{for(const{target:n}of e)if(_(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t])}),a=(0,R.useCallback)((e=>{const n=ht(e);null==o||o.disconnect(),n&&(null==o||o.observe(n)),r(n?t(n):null)}),[t,o]),[l,i]=L(a);return(0,R.useMemo)((()=>({nodeRef:l,rect:n,setRef:i})),[n,l,i])}({measure:q.dragOverlay.measure}),ye=null!=(n=ve.nodeRef.current)?n:le,we=E?null!=(r=ve.rect)?r:de:null,Re=Boolean(ve.nodeRef.current&&ve.rect),De=he(Me=Re?null:de,st(Me));var Me;const Ie=mt(ye?P(ye):null),ke=function(e){const t=(0,R.useRef)(e),n=A((n=>e?n&&n!==gt&&e&&t.current&&e.parentNode===t.current.parentNode?n:xe(e):gt),[e]);return(0,R.useEffect)((()=>{t.current=e}),[e]),n}(E?null!=me?me:le:null),Oe=function(e,t){void 0===t&&(t=Ee);const[n]=e,r=mt(n?P(n):null),[o,a]=(0,R.useReducer)((function(){return e.length?e.map((e=>_e(e)?r:new Fe(t(e),e))):ft}),ft),l=ct({callback:a});return e.length>0&&o===ft&&a(),k((()=>{e.length?e.forEach((e=>null==l?void 0:l.observe(e))):(null==l||l.disconnect(),a())}),[e]),o}(ke),Le=Pt(g,{transform:{x:N.x-De.x,y:N.y-De.y,scaleX:1,scaleY:1},activatorEvent:J,active:U,activeNodeRect:de,containerNodeRect:ge,draggingNodeRect:we,over:pe.current.over,overlayNodeRect:ve.rect,scrollableAncestors:ke,scrollableAncestorRects:Oe,windowRect:Ie}),Be=ie?z(ie,N):null,je=function(e){const[t,n]=(0,R.useState)(null),r=(0,R.useRef)(e),o=(0,R.useCallback)((e=>{const t=Se(e.target);t&&n((e=>e?(e.set(t,Pe(t)),new Map(e)):null))}),[]);return(0,R.useEffect)((()=>{const t=r.current;if(e!==t){a(t);const l=e.map((e=>{const t=Se(e);return t?(t.addEventListener("scroll",o,{passive:!0}),[t,Pe(t)]):null})).filter((e=>null!=e));n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(t)};function a(e){e.forEach((e=>{const t=Se(e);null==t||t.removeEventListener("scroll",o)}))}}),[o,e]),(0,R.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>z(e,t)),ae):Ae(e):ae),[e,t])}(ke),Ue=pt(je),ze=pt(je,[de]),Xe=z(Le,Ue),Ye=we?be(we,Le):null,Ke=U&&Ye?d({active:U,collisionRect:Ye,droppableRects:ee,droppableContainers:G,pointerCoordinates:Be}):null,He=ue(Ke,"id"),[Je,We]=(0,R.useState)(null),Ve=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Re?Le:z(Le,ze),null!=(o=null==Je?void 0:Je.rect)?o:null,de),$e=(0,R.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==X.current)return;const o=M.get(X.current);if(!o)return;const a=e.nativeEvent,l=new n({active:X.current,activeNode:o,event:a,options:r,context:pe,onStart(e){const t=X.current;if(null==t)return;const n=M.get(t);if(!n)return;const{onDragStart:r}=V.current,o={active:{id:t,data:n.data,rect:F}};(0,C.unstable_batchedUpdates)((()=>{null==r||r(o),w(_t.Initializing),h({type:ne.DragStart,initialCoordinates:e,active:t}),v({type:"onDragStart",event:o})}))},onMove(e){h({type:ne.DragMove,coordinates:e})},onEnd:i(ne.DragEnd),onCancel:i(ne.DragCancel)});function i(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=pe.current;let l=null;if(t&&o){const{cancelDrop:i}=V.current;l={activatorEvent:a,active:t,collisions:n,delta:o,over:r},e===ne.DragEnd&&"function"==typeof i&&await Promise.resolve(i(l))&&(e=ne.DragCancel)}X.current=null,(0,C.unstable_batchedUpdates)((()=>{h({type:e}),w(_t.Uninitialized),We(null),H(null),W(null);const t=e===ne.DragEnd?"onDragEnd":"onDragCancel";if(l){const e=V.current[t];null==e||e(l),v({type:t,event:l})}}))}}(0,C.unstable_batchedUpdates)((()=>{H(l),W(e.nativeEvent)}))}),[M]),Ge=(0,R.useCallback)(((e,t)=>(n,r)=>{const o=n.nativeEvent,a=M.get(r);if(null!==X.current||!a||o.dndKit||o.defaultPrevented)return;const l={active:a};!0===e(n,t.options,l)&&(o.dndKit={capturedBy:t.sensor},X.current=r,$e(n,t))}),[M,$e]),qe=function(e,t){return(0,R.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(c,Ge);!function(e){(0,R.useEffect)((()=>{if(!S)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(c),k((()=>{de&&y===_t.Initializing&&w(_t.Initialized)}),[de,y]),(0,R.useEffect)((()=>{const{onDragMove:e}=V.current,{active:t,activatorEvent:n,collisions:r,over:o}=pe.current;if(!t||!n)return;const a={active:t,activatorEvent:n,collisions:r,delta:{x:Xe.x,y:Xe.y},over:o};(0,C.unstable_batchedUpdates)((()=>{null==e||e(a),v({type:"onDragMove",event:a})}))}),[Xe.x,Xe.y]),(0,R.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=pe.current;if(!e||null==X.current||!t||!o)return;const{onDragOver:a}=V.current,l=r.get(He),i=l&&l.rect.current?{id:l.id,rect:l.rect.current,data:l.data,disabled:l.disabled}:null,s={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:i};(0,C.unstable_batchedUpdates)((()=>{We(i),null==a||a(s),v({type:"onDragOver",event:s})}))}),[He]),k((()=>{pe.current={activatorEvent:J,active:U,activeNode:le,collisionRect:Ye,collisions:Ke,droppableRects:ee,draggableNodes:M,draggingNode:ye,draggingNodeRect:we,droppableContainers:I,over:Je,scrollableAncestors:ke,scrollAdjustedTranslate:Xe},F.current={initial:we,translated:Ye}}),[U,le,Ke,Ye,M,ye,we,ee,I,Je,ke,Xe]),function(e){let{acceleration:t,activator:n=nt.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:l=5,order:i=rt.TreeOrder,pointerCoordinates:s,scrollableAncestors:c,scrollableAncestorRects:d,delta:u,threshold:g}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=B(t);return A((e=>{if(n||!r||!e)return ot;const o=Math.sign(t.x-r.x),a=Math.sign(t.y-r.y);return{x:{[Ne.Backward]:e.x[Ne.Backward]||-1===o,[Ne.Forward]:e.x[Ne.Forward]||1===o},y:{[Ne.Backward]:e.y[Ne.Backward]||-1===a,[Ne.Forward]:e.y[Ne.Forward]||1===a}}}),[n,t,r])}({delta:u,disabled:!a}),[m,f]=function(){const e=(0,R.useRef)(null);return[(0,R.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,R.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),h=(0,R.useRef)({x:0,y:0}),v=(0,R.useRef)({x:0,y:0}),b=(0,R.useMemo)((()=>{switch(n){case nt.Pointer:return s?{top:s.y,bottom:s.y,left:s.x,right:s.x}:null;case nt.DraggableRect:return o}}),[n,o,s]),y=(0,R.useRef)(null),w=(0,R.useCallback)((()=>{const e=y.current;if(!e)return;const t=h.current.x*v.current.x,n=h.current.y*v.current.y;e.scrollBy(t,n)}),[]),E=(0,R.useMemo)((()=>i===rt.TreeOrder?[...c].reverse():c),[i,c]);(0,R.useEffect)((()=>{if(a&&c.length&&b){for(const e of E){if(!1===(null==r?void 0:r(e)))continue;const n=c.indexOf(e),o=d[n];if(!o)continue;const{direction:a,speed:i}=Te(e,o,b,t,g);for(const e of["x","y"])p[e][a[e]]||(i[e]=0,a[e]=0);if(i.x>0||i.y>0)return f(),y.current=e,m(w,l),h.current=i,void(v.current=a)}h.current={x:0,y:0},v.current={x:0,y:0},f()}else f()}),[t,w,r,f,a,l,JSON.stringify(b),JSON.stringify(p),m,c,E,d,JSON.stringify(g)])}({...se,delta:N,draggingRect:Ye,pointerCoordinates:Be,scrollableAncestors:ke,scrollableAncestorRects:Oe});const Ze=(0,R.useMemo)((()=>({active:U,activeNode:le,activeNodeRect:de,activatorEvent:J,collisions:Ke,containerNodeRect:ge,dragOverlay:ve,draggableNodes:M,droppableContainers:I,droppableRects:ee,over:Je,measureDroppableContainers:re,scrollableAncestors:ke,scrollableAncestorRects:Oe,measuringConfiguration:q,measuringScheduled:oe,windowRect:Ie})),[U,le,de,J,Ke,ge,ve,M,I,ee,Je,re,ke,Oe,q,oe,Ie]),Qe=(0,R.useMemo)((()=>({activatorEvent:J,activators:qe,active:U,activeNodeRect:de,ariaDescribedById:{draggable:$},dispatch:h,draggableNodes:M,over:Je,measureDroppableContainers:re})),[J,qe,U,de,h,$,M,Je,re]);return x().createElement(Z.Provider,{value:b},x().createElement(xt.Provider,{value:Qe},x().createElement(Ct.Provider,{value:Ze},x().createElement(Nt.Provider,{value:Ve},s)),x().createElement(Mt,{disabled:!1===(null==l?void 0:l.restoreFocus)})),x().createElement(te,{...l,hiddenTextDescribedById:$}))})),kt=(0,R.createContext)(null),Tt="button",Ot="Droppable";function At(){return(0,R.useContext)(Ct)}const Lt={timeout:25};function Bt(e){let{animation:t,children:n}=e;const[r,o]=(0,R.useState)(null),[a,l]=(0,R.useState)(null),i=B(n);return n||r||!i||o(i),k((()=>{if(!a)return;const e=null==r?void 0:r.key,n=null==r?void 0:r.props.id;null!=e&&null!=n?Promise.resolve(t(n,a)).then((()=>{o(null)})):o(null)}),[t,r,a]),x().createElement(x().Fragment,null,n,r?(0,R.cloneElement)(r,{ref:l}):null)}const Ft={x:0,y:0,scaleX:1,scaleY:1};function jt(e){let{children:t}=e;return x().createElement(xt.Provider,{value:Rt},x().createElement(Nt.Provider,{value:Ft},t))}const Ut={position:"fixed",touchAction:"none"},zt=e=>Y(e)?"transform 250ms ease":void 0,Xt=(0,R.forwardRef)(((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:a,className:l,rect:i,style:s,transform:c,transition:d=zt}=e;if(!i)return null;const u=o?c:{...c,scaleX:1,scaleY:1},g={...Ut,width:i.width,height:i.height,top:i.top,left:i.left,transform:H.Transform.toString(u),transformOrigin:o&&r?ie(r,i):void 0,transition:"function"==typeof d?d(r):d,...s};return x().createElement(n,{className:l,style:g,ref:t},a)})),Yt=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:a,className:l}=e;if(null!=a&&a.active)for(const[e,t]of Object.entries(a.active))void 0!==t&&(o[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=a&&a.dragOverlay)for(const[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=l&&l.active&&n.node.classList.add(l.active),null!=l&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[e,t]of Object.entries(o))n.node.style.setProperty(e,t);null!=l&&l.active&&n.node.classList.remove(l.active)}},Kt={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:H.Transform.toString(t)},{transform:H.Transform.toString(n)}]},sideEffects:Yt({styles:{active:{opacity:"0"}}})};let Ht=0;function Jt(e){return(0,R.useMemo)((()=>{if(null!=e)return Ht++,Ht}),[e])}const Wt=x().memo((e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:a,modifiers:l,wrapperElement:i="div",className:s,zIndex:c=999}=e;const{activatorEvent:d,active:u,activeNodeRect:g,containerNodeRect:p,draggableNodes:m,droppableContainers:f,dragOverlay:h,over:v,measuringConfiguration:b,scrollableAncestors:y,scrollableAncestorRects:w,windowRect:E}=At(),C=(0,R.useContext)(Nt),S=Jt(null==u?void 0:u.id),D=Pt(l,{activatorEvent:d,active:u,activeNodeRect:g,containerNodeRect:p,draggingNodeRect:h.rect,over:v,overlayNodeRect:h.rect,scrollableAncestors:y,scrollableAncestorRects:w,transform:C,windowRect:E}),M=st(g),N=function(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return T(((e,a)=>{if(null===t)return;const l=n.get(e);if(!l)return;const i=l.node.current;if(!i)return;const s=ht(a);if(!s)return;const{transform:c}=P(a).getComputedStyle(a),d=ye(c);if(!d)return;const u="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...Kt,...e};return e=>{let{active:a,dragOverlay:l,transform:i,...s}=e;if(!t)return;const c=l.rect.left-a.rect.left,d=l.rect.top-a.rect.top,u={scaleX:1!==i.scaleX?a.rect.width*i.scaleX/l.rect.width:1,scaleY:1!==i.scaleY?a.rect.height*i.scaleY/l.rect.height:1},g={x:i.x-c,y:i.y-d,...u},p=o({...s,active:a,dragOverlay:l,transform:{initial:i,final:g}}),[m]=p,f=p[p.length-1];if(JSON.stringify(m)===JSON.stringify(f))return;const h=null==r?void 0:r({active:a,dragOverlay:l,...s}),v=l.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise((e=>{v.onfinish=()=>{null==h||h(),e()}}))}}(t);return Le(i,o.draggable.measure),u({active:{id:e,data:l.data,node:i,rect:o.draggable.measure(i)},draggableNodes:n,dragOverlay:{node:a,rect:o.dragOverlay.measure(s)},droppableContainers:r,measuringConfiguration:o,transform:d})}))}({config:r,draggableNodes:m,droppableContainers:f,measuringConfiguration:b}),_=M?h.setRef:void 0;return x().createElement(jt,null,x().createElement(Bt,{animation:N},u&&S?x().createElement(Xt,{key:S,id:u.id,ref:_,as:i,activatorEvent:d,adjustScale:t,className:s,transition:a,rect:M,style:{zIndex:c,...o},transform:D},n):null))}));function Vt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function $t(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function Gt(e){return null!==e&&e>=0}const qt=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=Vt(t,r,n),l=t[o],i=a[o];return i&&l?{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}:null},Zt={scaleX:1,scaleY:1},Qt=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:a,overIndex:l}=e;const i=null!=(t=a[n])?t:r;if(!i)return null;if(o===n){const e=a[l];return e?{x:0,y:n<l?e.top+e.height-(i.top+i.height):e.top-i.top,...Zt}:null}const s=function(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return r?n<t?o?r.top-(o.top+o.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}(a,o,n);return o>n&&o<=l?{x:0,y:-i.height-s,...Zt}:o<n&&o>=l?{x:0,y:i.height+s,...Zt}:{x:0,y:0,...Zt}},en="Sortable",tn=x().createContext({activeIndex:-1,containerId:en,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:qt,disabled:{draggable:!1,droppable:!1}});function nn(e){let{children:t,id:n,items:r,strategy:o=qt,disabled:a=!1}=e;const{active:l,dragOverlay:i,droppableRects:s,over:c,measureDroppableContainers:d}=At(),u=j(en,n),g=Boolean(null!==i.rect),p=(0,R.useMemo)((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),m=null!=l,f=l?p.indexOf(l.id):-1,h=c?p.indexOf(c.id):-1,v=(0,R.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,v.current),y=-1!==h&&-1===f||b,w=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(a);k((()=>{b&&m&&d(p)}),[b,p,m,d]),(0,R.useEffect)((()=>{v.current=p}),[p]);const E=(0,R.useMemo)((()=>({activeIndex:f,containerId:u,disabled:w,disableTransforms:y,items:p,overIndex:h,useDragOverlay:g,sortedRects:$t(p,s),strategy:o})),[f,u,w.draggable,w.droppable,y,p,h,s,g,o]);return x().createElement(tn.Provider,{value:E},t)}const rn=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Vt(n,r,o).indexOf(t)},on=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:l,previousItems:i,previousContainerId:s,transition:c}=e;return!(!c||!r||i!==a&&o===l||!n&&(l===o||t!==s))},an={duration:200,easing:"ease"},ln="transform",sn=H.Transition.toString({property:ln,duration:0,easing:"linear"}),cn={roleDescription:"sortable"};function dn(e){let{animateLayoutChanges:t=on,attributes:n,disabled:r,data:o,getNewIndex:a=rn,id:l,strategy:i,resizeObserverConfig:s,transition:c=an}=e;const{items:d,containerId:u,activeIndex:g,disabled:p,disableTransforms:m,sortedRects:f,overIndex:h,useDragOverlay:v,strategy:b}=(0,R.useContext)(tn),y=function(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,p),w=d.indexOf(l),E=(0,R.useMemo)((()=>({sortable:{containerId:u,index:w,items:d},...o})),[u,o,w,d]),x=(0,R.useMemo)((()=>d.slice(d.indexOf(l))),[d,l]),{rect:C,node:S,isOver:D,setNodeRef:M}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=j("Droppable"),{active:l,dispatch:i,over:s,measureDroppableContainers:c}=(0,R.useContext)(xt),d=(0,R.useRef)({disabled:n}),u=(0,R.useRef)(!1),g=(0,R.useRef)(null),p=(0,R.useRef)(null),{disabled:m,updateMeasurementsFor:f,timeout:h}={...Lt,...o},v=O(null!=f?f:r),b=ct({callback:(0,R.useCallback)((()=>{u.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{c(Array.isArray(v.current)?v.current:[v.current]),p.current=null}),h)):u.current=!0}),[h]),disabled:m||!l}),y=(0,R.useCallback)(((e,t)=>{b&&(t&&(b.unobserve(t),u.current=!1),e&&b.observe(e))}),[b]),[w,E]=L(y),x=O(t);return(0,R.useEffect)((()=>{b&&w.current&&(b.disconnect(),u.current=!1,b.observe(w.current))}),[w,b]),k((()=>(i({type:ne.RegisterDroppable,element:{id:r,key:a,disabled:n,node:w,rect:g,data:x}}),()=>i({type:ne.UnregisterDroppable,key:a,id:r}))),[r]),(0,R.useEffect)((()=>{n!==d.current.disabled&&(i({type:ne.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)}),[r,a,n,i]),{active:l,rect:g,isOver:(null==s?void 0:s.id)===r,node:w,over:s,setNodeRef:E}}({id:l,data:E,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:x,...s}}),{active:P,activatorEvent:N,activeNodeRect:_,attributes:I,setNodeRef:T,listeners:A,isDragging:B,over:F,setActivatorNodeRef:U,transform:z}=function(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=j(Ot),{activators:l,activatorEvent:i,active:s,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:g}=(0,R.useContext)(xt),{role:p=Tt,roleDescription:m="draggable",tabIndex:f=0}=null!=o?o:{},h=(null==s?void 0:s.id)===t,v=(0,R.useContext)(h?Nt:kt),[b,y]=L(),[w,E]=L(),x=function(e,t){return(0,R.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e}),{})),[e,t])}(l,t),C=O(n);return k((()=>(u.set(t,{id:t,key:a,node:b,activatorNode:w,data:C}),()=>{const e=u.get(t);e&&e.key===a&&u.delete(t)})),[u,t]),{active:s,activatorEvent:i,activeNodeRect:c,attributes:(0,R.useMemo)((()=>({role:p,tabIndex:f,"aria-disabled":r,"aria-pressed":!(!h||p!==Tt)||void 0,"aria-roledescription":m,"aria-describedby":d.draggable})),[r,p,f,h,m,d.draggable]),isDragging:h,listeners:r?void 0:x,node:b,over:g,setNodeRef:y,setActivatorNodeRef:E,transform:v}}({id:l,data:E,attributes:{...cn,...n},disabled:y.draggable}),X=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,R.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(M,T),K=Boolean(P),J=K&&!m&&Gt(g)&&Gt(h),W=!v&&B,V=W&&J?z:null,$=J?null!=V?V:(null!=i?i:b)({rects:f,activeNodeRect:_,activeIndex:g,overIndex:h,index:w}):null,G=Gt(g)&&Gt(h)?a({id:l,items:d,activeIndex:g,overIndex:h}):w,q=null==P?void 0:P.id,Z=(0,R.useRef)({activeId:q,items:d,newIndex:G,containerId:u}),Q=d!==Z.current.items,ee=t({active:P,containerId:u,isDragging:B,isSorting:K,id:l,index:w,items:d,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:c,wasDragging:null!=Z.current.activeId}),te=function(e){let{disabled:t,index:n,node:r,rect:o}=e;const[a,l]=(0,R.useState)(null),i=(0,R.useRef)(n);return k((()=>{if(!t&&n!==i.current&&r.current){const e=o.current;if(e){const t=Ee(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&l(n)}}n!==i.current&&(i.current=n)}),[t,n,r,o]),(0,R.useEffect)((()=>{a&&l(null)}),[a]),a}({disabled:!ee,index:w,node:S,rect:C});return(0,R.useEffect)((()=>{K&&Z.current.newIndex!==G&&(Z.current.newIndex=G),u!==Z.current.containerId&&(Z.current.containerId=u),d!==Z.current.items&&(Z.current.items=d)}),[K,G,u,d]),(0,R.useEffect)((()=>{if(q===Z.current.activeId)return;if(q&&!Z.current.activeId)return void(Z.current.activeId=q);const e=setTimeout((()=>{Z.current.activeId=q}),50);return()=>clearTimeout(e)}),[q]),{active:P,activeIndex:g,attributes:I,data:E,rect:C,index:w,newIndex:G,items:d,isOver:D,isSorting:K,isDragging:B,listeners:A,node:S,overIndex:h,over:F,setNodeRef:X,setActivatorNodeRef:U,setDroppableNodeRef:M,setDraggableNodeRef:T,transform:null!=te?te:$,transition:te||Q&&Z.current.newIndex===w?sn:W&&!Y(N)||!c?void 0:K||ee?H.Transition.toString({...c,property:ln}):void 0}}function un(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const gn=[Xe.Down,Xe.Right,Xe.Up,Xe.Left],pn=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:a,over:l,scrollableAncestors:i}}=t;if(gn.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];a.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const a=o.get(n.id);if(a)switch(e.code){case Xe.Down:r.top<a.top&&t.push(n);break;case Xe.Up:r.top>a.top&&t.push(n);break;case Xe.Left:r.left>a.left&&t.push(n);break;case Xe.Right:r.left<a.left&&t.push(n)}}));const d=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=de(t),a=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=de(r),l=o.reduce(((e,t,r)=>e+le(n[r],t)),0),i=Number((l/4).toFixed(4));a.push({id:t,data:{droppableContainer:e,value:i}})}}return a.sort(se)})({active:n,collisionRect:r,droppableRects:o,droppableContainers:t,pointerCoordinates:null});let u=ue(d,"id");if(u===(null==l?void 0:l.id)&&d.length>1&&(u=d[1].id),null!=u){const e=a.get(n.id),t=a.get(u),l=t?o.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&l&&e&&t){const n=xe(d).some(((e,t)=>i[t]!==e)),o=mn(e,t),a=(c=t,!(!un(s=e)||!un(c))&&!!mn(s,c)&&s.data.current.sortable.index<c.data.current.sortable.index),u=n||!o?{x:0,y:0}:{x:a?r.width-l.width:0,y:a?r.height-l.height:0},g={x:l.left,y:l.top};return u.x&&u.y?g:X(g,u)}}}var s,c};function mn(e,t){return!(!un(e)||!un(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var fn=n(184),hn=n.n(fn);function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vn.apply(this,arguments)}const bn=(0,R.forwardRef)((({id:e,children:t,...n},r)=>x().createElement("div",vn({},n,{ref:r}),t)));function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yn.apply(this,arguments)}const wn=e=>{const{id:t,label:n,url:r,editUrl:o,postStatus:a,handleRemoveClick:l}=e,[i,s]=(0,R.useState)(!1),{attributes:d,listeners:u,setNodeRef:g,transform:p,transition:m}=dn({id:t}),f=p?{transform:`translate3d(${p.x}px, ${p.y}px, 0px)`}:void 0,h=hn()({"sortable-multi-select-item":!0,"sortable-multi-select-item-hover":i}),v=o.replace("&amp;","&");return x().createElement(bn,yn({ref:g,style:f,label:n},d,{className:h}),x().createElement("div",yn({className:"sortable-multi-select-item-handle",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},u),n,(e=>{switch(e){case"trash":return x().createElement("span",{className:"module-page-inline-status module-page-non-publish-inline-status"},(0,c.__)("(Trash)","openlab-modules"));case"draft":return x().createElement("span",{className:"module-page-inline-status module-page-non-publish-inline-status"},(0,c.__)("(Draft)","openlab-modules"));default:return x().createElement(x().Fragment,null)}})(a)),x().createElement("div",null,x().createElement("a",{href:v},(0,c.__)("Edit","openlab-modules"))," | ",x().createElement("a",{href:r},(0,c.__)("View","openlab-modules"))," | ",x().createElement("a",{href:o,onClick:e=>{e.preventDefault(),l(t)}},(0,c.__)("Remove","openlab-modules"))))},En=e=>{const{onChange:t,options:n}=e,[r,o]=(0,R.useState)(null),a=e=>{for(var t in n)if(e===n[t].id)return t;return-1},l=r?n[a(Number(r.substr(9)))]:null,i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,R.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(oe(Ze),oe(We,{coordinateGetter:pn})),s=e=>{const r=Number(e.substr(9)),o=a(r),l=[...n.slice(0,o),...n.slice(o+1)];t(l)},c=n.map((e=>"sortable-"+e.id));return x().createElement("div",{className:"sortable-multi-select"},x().createElement("div",{className:"sortable-multi-select-selected-items"},x().createElement(It,{collisionDetection:pe,onDragEnd:e=>{const{active:r,over:l}=e;if(r.id!==l.id){const e=Number(r.id.substr(9)),i=Number(l.id.substr(9)),s=a(e),c=a(i),d=((e,t,n)=>{const r=[...e];return Array.prototype.splice.call(r,n,0,Array.prototype.splice.call(r,t,1)[0]),r})(n,s,c);return t(d),o(null),d}},onDragStart:e=>{const{active:t}=e;o(t.id)},sensors:i},x().createElement(nn,{items:c,strategy:Qt},n.map((({editUrl:e,id:t,order:n,title:r,url:o,status:a})=>x().createElement(wn,{id:"sortable-"+t,key:"sortable-"+t,value:t,label:r,url:o,postStatus:a,editUrl:e,handleRemoveClick:s})))),x().createElement(Wt,null,l?x().createElement(wn,{id:r,key:r,value:l.id,label:l.title,url:l.url,editUrl:l.editUrl}):null))))};(0,f.registerPlugin)("openlab-module-edit-module-component",{icon:"users",render:function({isSelected:e}){const t=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()));if(!t||"openlab_module"!==t)return null;const{moduleAcknowledgements:n,moduleDescription:o,postTitle:a}=(0,r.useSelect)((e=>({moduleAcknowledgements:e("core/editor").getEditedPostAttribute("meta").module_acknowledgements,moduleDescription:e("core/editor").getEditedPostAttribute("meta").module_description,postTitle:e("core/editor").getEditedPostAttribute("title")})),[]),{editPost:l}=(0,r.useDispatch)("core/editor"),i=e=>{l({meta:e})};return React.createElement(h.PluginDocumentSettingPanel,{name:"openlab-modules-edit-module",title:(0,c.__)("Edit Module","openlab-modules")},React.createElement(u.PanelRow,null,React.createElement(u.TextControl,{label:(0,c.__)("Name","openlab-modules"),onChange:e=>l({title:e}),value:a})),React.createElement(u.__experimentalDivider,null),React.createElement(u.PanelRow,null,React.createElement(u.TextareaControl,{label:(0,c.__)("Description","openlab-modules"),onChange:e=>i({module_description:e}),value:o})),React.createElement(u.__experimentalDivider,null),React.createElement(u.PanelRow,null,React.createElement(u.TextareaControl,{label:(0,c.__)("Acknowledgements","openlab-modules"),onChange:e=>i({module_acknowledgements:e}),value:n})))}}),(0,f.registerPlugin)("openlab-module-module-pages-component",{icon:"users",render:function({isSelected:e}){const[n,o]=(0,p.useState)(""),[a,l]=(0,p.useState)(""),[i,s]=(0,p.useState)(!1),d=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()));if(!d||"openlab_module"!==d)return null;const{modulePageIds:g,modulePages:m,postId:f}=(0,r.useSelect)((e=>{const t=e("core/editor").getCurrentPostId(),n=e("openlab-modules").getModulePages(t),r=e("core/editor").getEditedPostAttribute("meta").module_page_ids;return{modulePageIds:r?JSON.parse(r):[],modulePages:null!=n?n:[],postId:t}}),[]),v=e=>{o(e===n?"":e)},{editPost:b}=(0,r.useDispatch)("core/editor"),y=e=>{b({meta:e})},E=[];for(const e of g)m.hasOwnProperty(e)&&E.push(m[e]);const R=e=>{const t=[...g,e.id];y({module_page_ids:JSON.stringify(t)}),(0,r.dispatch)("openlab-modules").setModulePageIds(f,t);const n={editUrl:e.editUrl,id:e.id,title:e.title.rendered,url:e.link,status:"publish"},o=Object.assign({},m,{[e.id]:n});(0,r.dispatch)("openlab-modules").setModulePages(f,o)},x=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48"},React.createElement("path",{d:"M359-240 120-479l239-239 43 43-167 167h545v-172h60v231H236l166 166-43 43Z",fill:"#3c7cb6"}));return React.createElement(React.Fragment,null,React.createElement(h.PluginDocumentSettingPanel,{className:"openlab-modules-add-page-to-module",name:"openlab-modules-add-page-to-module",title:(0,c.__)("Add Page to Module","openlab-modules")},React.createElement("fieldset",null,React.createElement(u.PanelRow,null,React.createElement("legend",null,(0,c.__)("Add a page to this module by choosing one of the following options:","openlab-modules"))),React.createElement("div",{className:"add-mode"},React.createElement(u.PanelRow,null,React.createElement("div",{className:"create"===n?"add-mode-toggle add-mode-toggle-active":"add-mode-toggle"},React.createElement(u.Button,{onClick:()=>v("create"),text:(0,c.__)("Create New Page","openlab-modules")}))),"create"===n&&React.createElement("div",{className:"add-mode-content"},React.createElement("div",{className:"add-mode-create-fields"},React.createElement(u.TextControl,{className:"add-mode-text-field add-mode-create-title",onChange:e=>l(e),hideLabelFromVision:!0,label:(0,c.__)("Add page title and press enter.","openlab-modules"),placeholder:(0,c.__)("Add page title and press enter.","openlab-modules"),value:a}),React.createElement(u.Button,{className:"add-mode-create-submit",disabled:0===a.length,onClick:()=>{s(!0);const e={title:a,content:"",status:"publish",type:"page"};t()({path:"/wp/v2/pages",method:"POST",data:e}).then((e=>{const{id:t,title:n,link:r}=e;R(e),l(""),s(!1),o("")})).catch((e=>{console.error("Failed to create post:",e),s(!1)}))}},i?React.createElement(React.Fragment,null,React.createElement("div",{className:"progress-spinner"}," "),React.createElement("div",{className:"screen-reader-text"},(0,c.__)("Page creation in progress","openlab-modules"))):React.createElement(React.Fragment,null,x,React.createElement("div",{className:"screen-reader-text"},(0,c.__)("Click to create page","openlab-modules"))))))),React.createElement("div",{className:"add-mode"},React.createElement(u.PanelRow,null,React.createElement("div",{className:"existing"===n?"add-mode-toggle add-mode-toggle-active":"add-mode-toggle"},React.createElement(u.Button,{onClick:()=>v("existing"),text:(0,c.__)("Add Existing Page","openlab-modules")}))),"existing"===n&&React.createElement("div",{className:"add-mode-content"},React.createElement(u.PanelRow,null,React.createElement(w,{fetchParams:{excludeModulePages:"1"},hideLabelFromVision:!0,onSelectPost:e=>{-1===g.indexOf(e.id)&&R(e)},label:(0,c.__)("Search for an existing page.","openlab-modules"),placeholder:(0,c.__)("Search for an existing page.","openlab-modules"),postTypes:["pages"]})))))),React.createElement(h.PluginDocumentSettingPanel,{name:"openlab-modules-module-pages",title:(0,c.__)("Module Pages","openlab-modules")},React.createElement(u.PanelRow,null,E.length>0&&React.createElement(En,{options:E,onChange:e=>{const t=[];for(const n of e)t.push(n.id);y({module_page_ids:JSON.stringify(t)}),(0,r.dispatch)("openlab-modules").setModulePageIds(f,t)}}),0===E.length&&React.createElement("p",null,(0,c.__)("This module has no pages yet. Add or create a new page using the tools below.","openlab-modules")))))}}),(0,f.registerPlugin)("openlab-module-pages-modules-component",{icon:"users",render:function({isSelected:e}){const t=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType())),{editPost:n}=(0,r.useDispatch)("core/editor"),{isNew:o,moduleToLink:a,pageModules:l,postId:i}=(0,r.useSelect)((e=>{const t=e("core/editor").getCurrentPostId(),n=new URLSearchParams(window.location.search).get("link-to-module"),r=e("openlab-modules").getPageModules(t),o=n?e("core").getEntityRecord("postType","openlab_module",n):null;return{isNew:e("core/editor").isEditedPostNew(),moduleToLink:null!=o?o:null,pageModules:null!=r?r:[],postId:t}}),[]),s=!o&&l.length,d=o&&a;return React.useEffect((()=>{d&&n({meta:{link_to_module:a.id}})}),[d,a]),"page"!==t?null:s||d?React.createElement(h.PluginDocumentSettingPanel,{name:"openlab-modules-page-modules",title:(0,c.__)("Modules","openlab-modules")},s&&React.createElement(React.Fragment,null,React.createElement(u.PanelRow,null,(0,c._n)("This item is linked to the following module:","This item is linked to the following modules:",l.length,"openlab-modules")),l.map((e=>React.createElement(u.PanelRow,{key:"page-module-"+e.id},React.createElement("div",null,e.title),React.createElement("div",{className:"page-module-actions"},React.createElement("a",{href:e.editUrl.replace("&amp;","&")},(0,c.__)("Edit","openlab-modules"))," | ",React.createElement("a",{href:e.url},(0,c.__)("View","openlab-modules"))))))),d&&React.createElement(React.Fragment,null,React.createElement(u.PanelRow,null,(0,c.__)("This item will be linked to the following module:","openlab-modules")),React.createElement(u.PanelRow,null,React.createElement("div",null,a.title.rendered),React.createElement("div",{className:"page-module-actions"},React.createElement("a",{href:`${window.location.origin}/wp-admin/post.php?post=${a.id}&action=edit`},(0,c.__)("Edit","openlab-modules"))," | ",React.createElement("a",{href:a.link},(0,c.__)("View","openlab-modules")))))):null}})})()})();